<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core">

<h:body>
	<ui:composition>
		<h:form id="form">
			<p:growl id="growl" showDetail="true" sticky="true" />
			<p:panel id="panel" header="Buscar" closable="false"
				toggleable="false" style="text-align:center;">
				<h:panelGrid columns="2" style="text-align:left;">
					<h:outputText value="#{msg.clave} :" />
					<p:selectOneMenu id="cveFilter"
						value="#{beanCatGral.catalogoCveFilter }" style="min-width: 480px">
						<f:selectItem itemLabel="#{msg.seleccionarCve }" itemValue="" />
						<f:selectItems value="#{beanCatGral.listaSelectCatalogosCve}" />
						<p:ajax update="selectDscFilter"
							listener="#{beanCatGral.cambiaDescSelect}" />
					</p:selectOneMenu>
					<h:outputText value="#{msg.descripcion} :" />
					<p:selectOneMenu id="selectDscFilter" style="min-width: 480px"
						value="#{beanCatGral.catalogoDscFilter }">
						<f:selectItem itemLabel="#{msg.seleccionarDsc }" itemValue="" />
						<f:selectItems value="#{beanCatGral.listaSelectCatalogosDsc}" />
						<p:ajax update="selectEstFilter"
							listener="#{beanCatGral.cambiaEstatusSelect}" />
					</p:selectOneMenu>
					<h:outputText value="#{msg.estatus} :" />
					<p:selectOneMenu id="selectEstFilter" style="min-width: 480px"
						value="#{beanCatGral.catalogoEstFilter }">
						<f:selectItem itemLabel="#{msg.seleccionarEst }" itemValue="" />
						<f:selectItems value="#{beanCatGral.listaSelectCatalogosEst}" />
					</p:selectOneMenu>
				</h:panelGrid>
				<br />
				<h:panelGrid style="text-align:right" width="100%">
					<h:panelGrid columns="2" style="text-align:right">
						<p:commandButton value="#{msg.limpiar}"
							icon="ui-icon-arrowrefresh-1-e"
							onclick=":form:cveFilter.selectValue('')"
							actionListener="#{beanCatGral.limpiarFiltrado }" update="growl" />
						<p:commandButton icon="ui-icon-search"
							actionListener="#{beanCatGral.buscarFiltrado}"
							value="#{msg.buscar}" update="catGralTable,growl" />
					</h:panelGrid>
				</h:panelGrid>
			</p:panel>
			<p:panel>
				<h:panelGrid columns="4" style="text-align:left;">
					<p:commandButton id="deleteButton" value="#{msg.eliminar }"
						icon="ui-icon-trash" onclick="borrarDialog.show()" update="growl" />
					<p:commandButton id="editarButton" value="#{msg.editar }"
						icon="ui-icon-pencil" onclick="editarDialog.show()"
						update=":form:displayEditar, growl" />
					<p:commandButton id="viewButton" value="#{msg.ver }"
						icon="ui-icon-search" oncomplete="verDialog.show()"
						update=":form:displayVer, growl" />
					<p:commandButton id="nuevoButton" value="#{msg.nuevo }"
						icon="ui-icon-plusthick" onclick="nuevoDialog.show()"
						update=":form:displayNuevo, growl" />
				</h:panelGrid>
			</p:panel>
			<p:panel>
				<p:dataTable id="catGralTable" value="#{beanCatGral.listaCatalogos}"
					var="cat" rowKey="#{cat.idCatGral}" paginator="true"
					selection="#{beanCatGral.catalogoSelected}"
					filteredValue="#{beanCatGral.listaFiltered }"
					paginatorPosition="bottom" rows="10">
					<p:column selectionMode="single" style="width:2%" />
					<p:column id="id" headerText="#{msg.id}"
						filterBy="#{cat.idCatGral }" sortBy="#{cat.idCatGral}">
						<h:outputText id="catIdOutputTbl" value="#{cat.idCatGral}" />
					</p:column>
					<p:column id="catCveColumn" headerText="#{msg.clave}"
						filterBy="#{cat.cveRegistro }" sortBy="#{cat.cveRegistro}">
						<h:outputText id="nombreCve" value="#{cat.cveRegistro}" />
					</p:column>
					<p:column id="catDscColumn" headerText="#{msg.descripcion}"
						filterBy="#{cat.dsc }" sortBy="#{cat.dsc}">
						<h:outputText id="nombreDscTbl" value="#{cat.dsc}" />
					</p:column>
					<p:column id="catEstatusColumn" headerText="#{msg.estatus}"
						filterBy="#{cat.estatus }" sortBy="#{cat.estatus}">
						<h:outputText id="nombreEstatusTbl" value="#{cat.estatus}" />
					</p:column>
				</p:dataTable>
			</p:panel>
			<!-- Panel de Ver -->
			<p:dialog id="dialog" header="#{msg.ver}" widgetVar="verDialog" position="top"
				modal="true">
				<h:panelGrid id="displayVer" columns="2" cellpadding="4">
					<h:panelGroup id="messagePanelVer" layout="block">
						<h:messages errorStyle="color: red" infoStyle="color: green"
							layout="list" style="font-size:12px;font-family:Arial" />
					</h:panelGroup>
					<h:outputText />
					<h:outputText value="#{msg.clave}" />
					<p:inputText readonly="true" value="#{beanCatGral.catalogoSelected.cveRegistro}"
						style="font-weight:bold; height:100%" />
					<h:outputText value="#{msg.descripcion}" />
					<p:inputText readonly="true" value="#{beanCatGral.catalogoSelected.dsc}"
						style="font-weight:bold; height:100%" />
					<h:outputText value="#{msg.activo}" />
					<p:inputText readonly="true"
						value="#{beanCatGral.catalogoSelected.activo == 1 ? 'Si' : 'No' }"
						style="font-weight:bold; height:100%" />
				</h:panelGrid>
				<p:commandButton id="aceptarVerBtn" value="#{msg.aceptar }"
					icon="ui-icon-check" onclick="verDialog.hide()" />
			</p:dialog>
			<!-- Fin de panel de Ver -->
			<!--  Inicio panel de Nuevo -->
			<p:dialog id="dialogNuevo" header="#{msg.frsNuevoRegistro}" position="top"
				widgetVar="nuevoDialog" closable="true" modal="true"
				draggable="true" width="400">
				<h:panelGrid columns="2" width="100%" id="displayNuevo">
					<h:outputText value="#{msg.clave}" />
					<p:inputText value="#{beanCatGral.catalogoNuevo.cveRegistro}"
						style="font-weight:bold; height:100%; width:260px" />
					<h:outputText value="#{msg.descripcion}" />
					<p:inputText id="nombrePopupNuevo"
						value="#{beanCatGral.catalogoNuevo.dsc}" style="font-weight:bold; height:100%; width:260px" />
						<h:outputText value="#{msg.tipo}"/>
						<p:selectOneMenu value="#{beanCatGral.idTipoCatGralNuevo}" style="width:100%">
							<f:selectItem itemLabel="#{msg.seleccionarTipo}" itemValue="0"/>
							<f:selectItems value="#{beanCatGral.listSelectTipoCat}"/>
						</p:selectOneMenu>
					<h:outputText id="activoPopupNuevoLabel" value="#{msg.activo}" />
					<h:selectBooleanCheckbox id="activoPopupNuevo"
						value="#{beanCatGral.nuevoCatalogoActivo}">
					</h:selectBooleanCheckbox>
				</h:panelGrid>
				<h:panelGrid style="float: right;" columns="2">
					<p:commandButton value="#{msg.aceptar }" icon="ui-icon-check"
						oncomplete="if(!args.validationFailed) nuevoDialog.hide()"
						actionListener="#{beanCatGral.saveCat }"
						update=":form:catGralTable, growl" />
					<p:commandButton value="#{msg.cancelar }" icon="ui-icon-closethick"
						onclick="nuevoDialog.hide()"
						actionListener="#{beanCatGral.saveCatCancel }" />
				</h:panelGrid>
			</p:dialog>
			<!-- Fin de panel de nuevo -->
			<!-- Inicio de panel de edicion -->
			<p:dialog id="dialogEditar" header="#{msg.frsNuevoRegistro}"
				widgetVar="editarDialog" closable="true" modal="true" position="top"
				draggable="true" width="400">
				<h:panelGrid columns="2" width="100%" id="displayEditar">
					<h:outputText value="#{msg.clave}" />
					<h:panelGroup>
						<p:inputText id="selectedCve"
							value="#{beanCatGral.selectedClaveCatGral}"
							style="font-weight:bold; height:100%; width:260px" />
						<p:watermark for="selectedCve"
							value="#{beanCatGral.catalogoSelected.cveRegistro }" />
					</h:panelGroup>
					<h:outputText value="#{msg.descripcion}" />
					<h:panelGroup>
						<p:inputText id="inputEstadoSelected" style="font-weight:bold; height:100%; width:260px"
							value="#{beanCatGral.selectedDscCatGral }" />
						<p:watermark for="inputEstadoSelected"
							value="#{beanCatGral.catalogoSelected.dsc }" />
					</h:panelGroup>
					<h:outputText value="#{msg.tipo}"/>
						<p:selectOneMenu value="#{beanCatGral.idTipoCatGralEdit}" style="width:100%">
							<f:selectItem itemLabel="#{msg.seleccionarTipo}" itemValue="0"/>
							<f:selectItems value="#{beanCatGral.listSelectTipoCat}"/>
						</p:selectOneMenu>
					<h:outputText value="#{msg.activo}" />
					<h:selectBooleanCheckbox
						value="#{beanCatGral.selectedCatalogoActivo}">
					</h:selectBooleanCheckbox>
				</h:panelGrid>
				<h:panelGrid style="float: right;" columns="2">
					<p:commandButton value="#{msg.aceptar }" icon="ui-icon-check"
						oncomplete="if(!args.validationFailed) editarDialog.hide()"
						actionListener="#{beanCatGral.updateCat }"
						update=":form:catGralTable, growl" />
					<p:commandButton value="#{msg.cancelar }" icon="ui-icon-closethick"
						onclick="editarDialog.hide()"
						actionListener="#{beanCatGral.cancelDeleteCat }" />
				</h:panelGrid>
			</p:dialog>
			<!-- Fin de panel de edicion -->
			<!-- Panel de borrado -->
			<p:confirmDialog showEffect="fade" widgetVar="borrarDialog"
				header="#{msg.confirmar }" message="#{msg.frsBorrarConfirmacion }">
				<p:commandButton value="#{msg.si }"
					actionListener="#{beanCatGral.deleteCat}"
					update="catGralTable, growl" styleClass="ui-confirmdialog-yes"
					icon="ui-icon-check" oncomplete="borrarDialog.hide()" />
				<p:commandButton value="#{msg.no }" type="button"
					styleClass="ui-confirmdialog-no" icon="ui-icon-close"
					onclick="borrarDialog.hide()" />
			</p:confirmDialog>
			<!-- Fin de panel de borrado -->
		</h:form>


	</ui:composition>
</h:body>
</html>